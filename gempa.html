
 <body>
  <!-- üîπ Info Gempa Berjalan -->
  <div class="info-gempa">
    <span id="scrollGempa" class="scrolling-text warna-abu-emas">
      Memuat data gempa terkini dari BMKG...
    </span>
  </div>
   <button class="back-btn" onclick="window.location.href='https://wisayadi.github.io/parameter-dashboard/cardipa.html'">
    ‚¨ÖÔ∏è Kembali ke Dashboard
  </button>   
</body>

<style>
      /* üîπ Tombol kembali */
  .back-btn {
    display: inline-block;
    background: linear-gradient(90deg, #ff5f6d, #ffc371);
    color: /*white*/black;
    border: none;
    padding: 6px 12px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    cursor: pointer;
    margin: 15px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  .back-btn:hover {
    transform: scale(1.07);
    background: linear-gradient(90deg, #ff7a7a, #ffb86b);
  }

  /* üåç Latar dan area scroll */
  .info-gempa {
    background: linear-gradient(180deg, #fffef7, #f5fff5);
    padding: 8px 0;
    overflow: hidden;
    white-space: nowrap;
    text-align: center;
  }

  /* ‚ú® Teks berjalan */
  .scrolling-text {
    display: inline-block;
    padding-left: 100%;
    animation: scroll-left 40s linear infinite;
    transition: opacity 1s ease;
    font-weight: 600;
    font-size: 10px;
  }

  @keyframes scroll-left {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
  }

  /* üåà Warna berdasarkan magnitudo */
  .warna-hijau { color: /*#3e3e3e*/green; } /* <4.0 */
  .warna-abu-emas { color: #3e3e3e; } /* <5.0 */
  .warna-orange { color: #ff8c00; }   /* 5.0‚Äì5.9 */
  .warna-merah-maron { 
    color: #800000; 
    background: linear-gradient(90deg, #800000, #b02a37, #800000);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: pulse-gradient 3s ease-in-out infinite, scroll-left 40s linear infinite;
  }

  /* üí• Efek gradient berdenyut untuk magnitudo ‚â•6 */
  @keyframes pulse-gradient {
    0% {
      background-position: 0% 50%;
      text-shadow: 0 0 6px rgba(176, 42, 55, 0.4);
    }
    50% {
      background-position: 100% 50%;
      text-shadow: 0 0 18px rgba(255, 50, 50, 0.8);
    }
    100% {
      background-position: 0% 50%;
      text-shadow: 0 0 6px rgba(176, 42, 55, 0.4);
    }
  }
</style>

<script>
  const scrollElem = document.getElementById('scrollGempa');

  // üîÅ Efek ganti teks halus
  function updateGempa(teks, magnitudo) {
    scrollElem.style.opacity = 0;
    setTimeout(() => {
      scrollElem.textContent = teks;
      scrollElem.className = 'scrolling-text';
      if (magnitudo < 4.0) scrollElem.classList.add('warna-hijau');
      else if (magnitudo < 5.0) scrollElem.classList.add('warna-abu-emas'/*'warna-hijau'*/);
      else if (magnitudo >= 5.0 && magnitudo < 6.0) scrollElem.classList.add('warna-orange');
      else scrollElem.classList.add('warna-merah-maron');
      scrollElem.style.opacity = 1;
    }, 800);
  }

  // üåç Ambil data gempa dari API BMKG
  async function fetchGempa() {
    try {
      const res = await fetch('https://data.bmkg.go.id/DataMKG/TEWS/autogempa.json');
      const data = await res.json();

      const g = data.Infogempa.gempa;
      const magnitudo = parseFloat(g.Magnitude);
      const lokasi = g.Wilayah;
      const waktu = g.Tanggal + ' ' + g.Jam;
      const dirasakan = g.Dirasakan;
      const teks = `üåã GEMPA ${g.Tanggal} pukul ${g.Jam} | Magnitudo: ${g.Magnitude} SR | Kedalaman: ${g.Kedalaman} | Lokasi: ${g.Wilayah} | Koordinat: ${g.Lintang}, ${g.Bujur} | Dirasakan: ${dirasakan} | Potensi: ${g.Potensi}`;
      
      updateGempa(teks, magnitudo);
    } catch (e) {
      console.error('Gagal ambil data BMKG:', e);
      updateGempa('‚ö†Ô∏è Gagal memuat data gempa dari BMKG.', 0);
    }
  }

  // ‚è± Jalankan pertama kali & perbarui tiap 5 menit
  fetchGempa();
  setInterval(fetchGempa, 5 * 60 * 1000);
</script>

    <!-- wilayah Zona Waktu -->
  <body>
  <div class="card-waktu">
  <h3>üïí Zona Waktu</h3>

  <!-- Tombol Zona Waktu -->
  <div style="text-align:center; margin:10px;">
    <button class="btnZona" onclick="setZona('WIB')">WIB</button>
    <button class="btnZona" onclick="setZona('WITA')">WITA</button>
    <button class="btnZona" onclick="setZona('WIT')">WIT</button>
  </div>

   <div id="waktuSekarang" class="waktu-display">Memuat waktu...</div>
</div>
  </div>

  <script>
  // üîß Simpan zona waktu ke localStorage
  function setZona(zona) {
    localStorage.setItem('zonaWaktu', zona);
    tampilkanWaktu();
  }

  // üîÑ Tampilkan waktu sesuai zona
  function tampilkanWaktu() {
    let zona = localStorage.getItem('zonaWaktu') || 'WIB'; // default WIB
    let now = new Date();

    // Konversi offset zona waktu
    let offset = 7; // WIB default
    if (zona === 'WITA') offset = 8;
    if (zona === 'WIT') offset = 9;

    // Hitung waktu lokal
    let utc = now.getTime() + (now.getTimezoneOffset() * 60000);
    let waktuZona = new Date(utc + (3600000 * offset));

    // Format tanggal dan waktu
    const hari = waktuZona.toLocaleDateString('id-ID', { weekday: 'long' });
    const tanggal = waktuZona.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
    const jam = waktuZona.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });

    document.getElementById('waktuSekarang').innerHTML =
      `${hari}, ${tanggal} pukul ${jam} (${zona})`;

    // Simpan zona aktif di tombol
    document.querySelectorAll('.btnZona').forEach(btn => {
      btn.style.background = (btn.textContent === zona) ? '#7B61FF' : '#ddd';
      btn.style.color = (btn.textContent === zona) ? '#fff' : '#000';
    });
  }

  // Jalankan otomatis
  setInterval(tampilkanWaktu, 1000);
  tampilkanWaktu();
  </script>

  <style>
     /* üåü Card Container */
  .card-waktu {
    max-width: 285px;
    margin: 25px auto;
    /*background: linear-gradient(180deg, #ffffff, #f8fbff);*/
    background: #f3fff6;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    border: 1px solid #f3d7b6;
    padding: 20px;
    text-align: center;
    font-family: 'Poppins', Arial, sans-serif;
    transition: all 0.3s ease;
  }

  .card-waktu:hover {
    transform: scale(1.02);
    box-shadow: 0 12px 25px rgba(0,0,0,0.15);
  }

  .card-waktu h3 {
    color: /*#2a3d66*/brown;
    font-size: 12px;
    margin-bottom: 10px;
  }

  /*.btnZona {
    padding: 6px 14px;
    border-radius: 10px;
    font-size: 10px;
    border: none;
    margin: 3px;
    cursor: pointer;
    background: #ddd;
    transition: 0.3s;
  }
  .btnZona:hover {
    background: #7B61FF;
    color: white;
  }*/
     /* üß≠ Tombol Zona */
  .Zona-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin-top: 12px;
  }

  .btnZona {
    background: linear-gradient(135deg, #e0e0e0, #ffffff);
    border: 2px solid #ccc;
    border-radius: 50px;
    padding: 3px 10px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 11px;
    color: /*#333*/silver;
  }

  .btnZona:hover {
    background: linear-gradient(135deg, #d4e2fc, #f0f8ff);
    transform: scale(1.08);
    box-shadow: 0 0 6px rgba(0,0,0,0.2);
  }

  .btnZona.active {
    background: linear-gradient(135deg, #4a90e2, #5cc6ff);
    color: white;
    border-color: #4a90e2;
    box-shadow: 0 0 12px rgba(0, 150, 255, 0.6);
    transform: scale(1.05);
  }
   
  /* ‚è∞ Teks Waktu */
  .waktu-display {
  font-weight: bold;
  color: /*#111*/blue;
  font-size: 10px;
  background: /*linear-gradient(90deg, #eef5ff, #ffffff)*/lightyellow;
  border-radius: 10px;
  padding: /*8px*/10px 12px;
  display: inline-block;
  border: 1px solid /*#eee*/#f3d7b6;
}
    
  </style>
</body>
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Peta Gempa BMKG Interaktif</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(180deg, #eef5ff, #ffffff);
    margin: 0;
    padding: 0;
    /*overflow-x: hidden;*/
    /*overflow-x: auto;*/
    text-align: center;
  }

  /* üîπ Header judul + tombol */
  .header-container {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    margin-top: 10px;
    flex-wrap: wrap;
  }

  h2 {
    color: brown;
    font-size: 14px;
    margin: 0;
  }

  #toggleMapBtn {
    background: linear-gradient(90deg, #673ab7, #512da8);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 4px 10px;
    font-size: 12px;
    cursor: pointer;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  #toggleMapBtn:hover {
    transform: scale(1.05);
    background: linear-gradient(90deg, #7e57c2, #5e35b1);
  }

  /* üîπ Kontainer peta */
  #mapContainer {
    width: 100%;
    opacity: 0;
    transform: scale(0.98);
    max-height: 0;
    overflow: visible;
    transition: all 0.6s ease;
  }
  #mapContainer.show {
    opacity: 1;
    transform: scale(1);
    max-height: 500px;
  }

  #map {
    height: 400px;
    width: 100%;
    margin: 15px auto;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }

  /* üîπ Legenda warna */
  .legend {
    position: absolute;
    bottom: 20px;
    left: 20px;
    background: /*rgba(255, 255, 255, 0.95)*/#ffffff4D;
    padding: 10px 14px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.2);
    font-size: 10px;
    line-height: 15px;
    color: #333;
    z-index: 1000;
  }
  .legend i {
    width: 10px;
    height: 10px;
    float: left;
    margin-right: 8px;
    border-radius: 3px;
  }

  /* üîπ Efek marker */
  .marker-icon {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    border: 2px solid white;
  }
  .green { background-color: #00c853; }
  .yellow { background-color: #ffeb3b; }
  .orange { background-color: #ff9800; }
  .red { background-color: #e53935; }

  /* üîπ Efek berdenyut */
  @keyframes pulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.6; }
    100% { transform: scale(1); opacity: 1; }
  }
  .pulse { animation: pulse 1.5s infinite; }

  /* üîπ Efek getar */
  @keyframes shake {
    0%,100% { transform: translate(0,0); }
    20% { transform: translate(-3px, 2px); }
    40% { transform: translate(3px, -2px); }
    60% { transform: translate(-2px, 2px); }
    80% { transform: translate(2px, -1px); }
  }
  .shake { animation: shake 0.5s ease-in-out infinite; }

  /* üîπ Popup peringatan */
  #popup {
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.8);
    background: radial-gradient(circle at top left, #ff4d4d, #b30000);
    color: #fff;
    padding: 25px 30px;
    border-radius: 15px;
    box-shadow: 0 4px 30px rgba(0,0,0,0.3);
    opacity: 0;
    transition: all 0.5s ease;
    z-index: 9999;
  }
  #popup.show {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  #popup button {
    margin-top: 10px;
    background: #fff;
    color: #b30000;
    border: none;
    border-radius: 8px;
    padding: 6px 14px;
    cursor: pointer;
  }

  /* Popup info marker */
  .leaflet-popup-content-wrapper {
    border-radius: 10px;
    padding: 6px;
    background: #ffffff4D;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    font-size: 6px;
    color: brown;
  }
  .leaflet-popup-content { margin: 6px 8px; }
</style>
</head>
<body>

<!-- üîπ Header Judul dan Tombol -->
<div class="header-container">
  <h2>üåã Peta Gempa BMKG Terkini</h2>
  <button id="toggleMapBtn">üìç Lihat Peta</button>
</div>

<!-- üîπ Peta -->
<div id="mapContainer">
  <div id="map"></div>
  <audio id="gemuruhAudio" src="https://cdn.pixabay.com/download/audio/2023/03/15/audio_2abce8c9c7.mp3?filename=rumble-low-earthquake-143076.mp3"></audio>

  <div id="popup">
    <h3>‚ö†Ô∏è Peringatan Gempa Besar!</h3>
    <p id="popupText"></p>
    <button onclick="closePopup()">Tutup</button>
  </div>

  <div class="legend">
    <strong>Magnitudo</strong><br>
    <i style="background:#00c853"></i> < 3<br>
    <i style="background:#ffeb3b"></i> 3 ‚Äì 4.9<br>
    <i style="background:#ff9800"></i> 5 ‚Äì 5.9<br>
    <i style="background:#e53935"></i> ‚â• 6
  </div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
let map, marker;
const audio = document.getElementById('gemuruhAudio');
const popup = document.getElementById('popup');
const popupText = document.getElementById('popupText');
const mapContainer = document.getElementById('mapContainer');
const toggleBtn = document.getElementById('toggleMapBtn');

function showPopup(teks) {
  popupText.innerHTML = teks;
  popup.classList.add('show');
}
function closePopup() {
  popup.classList.remove('show');
}

toggleBtn.addEventListener('click', () => {
  if (mapContainer.classList.contains('show')) {
    mapContainer.classList.remove('show');
    toggleBtn.innerText = "üìç Lihat Peta";
  } else {
    mapContainer.classList.add('show');
    toggleBtn.innerText = "‚ùå Tutup Peta";
    if (!map) initMap();
  }
});

function initMap() {
  map = L.map('map').setView([-2.5, 118], 5);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 10
  }).addTo(map);
  fetchGempa();
}

function createColoredMarker(colorClass) {
  const div = document.createElement('div');
  div.className = `marker-icon ${colorClass} pulse`;
  return L.divIcon({
    className: '',
    html: div.outerHTML,
    iconSize: [20, 20],
    iconAnchor: [10, 10]
  });
}

async function updateGempa(magnitudo, lat, lon, lokasi, waktu, kedalaman, potensi) {
  let color = 'green';
  if (magnitudo >= 3.0 && magnitudo < 5.0) color = 'yellow';
  else if (magnitudo >= 5.0 && magnitudo < 6.0) color = 'orange';
  else if (magnitudo >= 6.0) color = 'red';

  const icon = createColoredMarker(color);

  if (magnitudo >= 5.0) {
    document.body.classList.add('shake');
    setTimeout(() => document.body.classList.remove('shake'), 3000);
    audio.currentTime = 0;
    audio.play();
  }

  if (magnitudo >= 6.0) {
    showPopup(`Terjadi gempa besar <b>${magnitudo} SR</b><br>${lokasi}<br>Waktu: ${waktu}<br>Kedalaman: ${kedalaman}<br>${potensi}`);
  }

  if (marker) map.removeLayer(marker);
  marker = L.marker([lat, lon], { icon: icon })
    .addTo(map)
    .bindPopup(`
      <b>üìç Lokasi:</b> ${lokasi}<br>
      <b>üß≠ Koordinat:</b> ${lat}, ${lon}<br>
      <b>üí• Magnitudo:</b> ${magnitudo} SR<br>
      <b>üåä Kedalaman:</b> ${kedalaman}<br>
      <b>üïí Waktu:</b> ${waktu}<br>
      <b>‚ö†Ô∏è Potensi:</b> ${potensi}
    `)
    .openPopup();
    
       // Tambahkan lingkaran radius otomatis di sekitar episentrum
    let radius = 30000; // default 30 km
    if (magnitudo >= 5 && magnitudo < 6) radius = 50000;
    else if (magnitudo >= 6 && magnitudo < 7) radius = 75000;
    else if (magnitudo >= 7) radius = 100000;

    circle = L.circle([lat, lon], {
      color: color,
      fillColor: color,
      fillOpacity: 0.15,
      radius: radius
    }).addTo(map);

  map.setView([lat, lon], 6);
}
  
  async function fetchGempa() {
  try {
    const res = await fetch('https://data.bmkg.go.id/DataMKG/TEWS/autogempa.json');
    const data = await res.json();
    const g = data.Infogempa.gempa;

    const magnitudo = parseFloat(g.Magnitude);
    const lokasi = g.Wilayah;
    const waktu = `${g.Tanggal} pukul ${g.Jam}`;
    const kedalaman = g.Kedalaman;
    const potensi = g.Potensi || "Tidak ada potensi tsunami.";

    // üîÑ Konversi lintang & bujur ke format numerik sesuai arah
    const latText = g.Lintang.trim();
    const lonText = g.Bujur.trim();

    let lat = parseFloat(latText);
    let lon = parseFloat(lonText);

    if (latText.includes("LS")) lat = -lat; // Selatan = negatif
    if (lonText.includes("BB")) lon = -lon; // Barat = negatif

    // üîç Kirim ke fungsi update marker
    updateGempa(magnitudo, lat, lon, lokasi, waktu, kedalaman, potensi);

  } catch (e) {
    console.error('Gagal ambil data BMKG:', e);
  }
}
  
</script>
</body>
</html>
  
   <!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Data Indonesia</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
      html, body {
  overflow-x: visible !important;
}
    body {
      font-family: Arial, Helvetica, sans-serif;
      background: #f4f6f8;
      color: #222;
      margin: 0;
      padding: 16px;
    }
    .wrap { max-width: 680px; margin: 0 auto; }
    .card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,.08);
      margin: 12px 0;
      padding: 14px;
    }

    /* --- Tabel Cuaca, Udara, Sholat --- */
    table {
      width: 100%;
      border-collapse: collapse;
      table-layout: auto;
      word-wrap: break-word; /* biar teks panjang bisa patah */
    }
    th, td {
      border: 1px solid #e5e9ef;
      padding: 8px 6px;
      text-align: center;
      font-size: 14px;
    }
    table.cuaca th { background:#007BFF; color:#fff; }
    table.jadwal th { background:#28A745; color:#fff; }
    table.udara th  { background:#f97316; color:#fff; }
    table.cuaca td, table.jadwal td, table.udara td { background:#f9fbfd; }
    table tr:nth-child(even) td { background:#eef3f9; }

    /* --- Tabel Gempa --- */
    .table-container {
      overflow-x: auto; /* scroll horizontal */
      margin-top: 12px;
      border: 1px solid #ddd;
      padding: 5px;
    }
    .table-container table {
      min-width: 800px;   /* tetap lebar */
      white-space: nowrap; /* cegah pecah huruf */
      word-wrap: normal;   /* override */
    }
    .table-container th,
    .table-container td {
      font-size: 13px;
      padding: 6px 8px;
      text-align: center;
    }
      
 .card-gempa h2 {
  text-align: center;
  font-size: 14px;
  /*color: #1b5e20;*/
  color: brown;
  margin-bottom: 12px;
  font-weight: bold;
}
  /* Header tabel merah */
    #gempaTable thead th {
    background-color: #c62828; /* merah */
    color: #fff;               /* teks putih biar kontras */
    }  
  .card-gempa {
  /*background: linear-gradient(180deg, #e3f2fd, #bbdefb);*/
  /*background: linear-gradient(180deg, #fce4ec, #f8bbd0);*/
  /*background: linear-gradient(180deg, #263238, #37474f);
  color: silver;*/
  background: linear-gradient(180deg, #efebe9, #d7ccc8);
  /*background: linear-gradient(180deg, #f1f8e9, #e8f5e9);*/
  /*background: linear-gradient(180deg, #fffde7, #fff9c4);*/
  /*background: linear-gradient(180deg, #e3f2fd, #bbdefb);*/
  /***background: linear-gradient(180deg, #f1f8e9, #e8f5e9);***/
  /*background: linear-gradient(135deg, #e8f5e9, #f1f8e9);*/
  /*background: linear-gradient(180deg, #fff8e1, #fff3e0);*/
  color: black;
  border-radius: 18px; 
  /*box-shadow: 0 6px 20px rgba(255, 140, 0, 0.25);*/
  padding: 20px;
  margin: 20px 0;
  border: 1px solid rgba(255, 183, 77, 0.4);
  transition: all 0.3s ease;
  }
   /*.card-gempa:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 24px rgba(255, 140, 0, 0.35);
    }*/
  .blink-text {
    text-align: center;
    font-size: 12px;
    font-weight: bold;
    color: red;
    margin-bottom: 5px;
    animation: blink 1s infinite;
  }

  @keyframes blink {
    0%   { opacity: 1; }
    50%  { opacity: 0; }
    100% { opacity: 1; }
  }
    .table-container {
  overflow-x: auto !important;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
}
  </style>
</head>
<body>
<div class="wrap">

  <!-- Gempa -->
  <div class="card-gempa">
   <h2>Tabel Gempa Bumi (BMKG) diatas 5 SR üåã</h2>
    <p>Data resmi BMKG: 
      <a href="https://data.bmkg.go.id/DataMKG/TEWS/gempaterkini.json" target="_blank">JSON Feed</a>
    </p>
 <!-- Teks geser berkedip -->
<div class="blink-text">
  &lt;-------geser-------&gt;
</div>
    <div class="table-container">
      <table id="gempaTable">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>
         <div style="text-align:center; margin-top:15px; margin-bottom:15px;">
  <canvas id="gempaChart" style="max-width:500px; width:100%; height:300px;"></canvas>
</div>
   
  </div>
</div>
  <script>
async function loadGempa() {
  try {
    const res = await fetch("https://data.bmkg.go.id/DataMKG/TEWS/gempaterkini.json");
    const data = await res.json();

    const gempas = data.Infogempa.gempa;
    const thead = document.querySelector("#gempaTable thead");
    const tbody = document.querySelector("#gempaTable tbody");

    // Header jadi Gempa 1,2,3...
    let headerRow = "<tr><th>Data</th>";
    gempas.forEach((g, i) => {
      headerRow += `<th>Gempa ${i+1}</th>`;
    });
    headerRow += "</tr>";
    thead.innerHTML = headerRow;

    function buatBaris(label, key) {
      let row = `<tr><td><b>${label}</b></td>`;
      gempas.forEach(g => {
        row += `<td>${g[key]}</td>`;
      });
      row += "</tr>";
      return row;
    }

    tbody.innerHTML += buatBaris("Tanggal", "Tanggal");
    tbody.innerHTML += buatBaris("Jam", "Jam");
    tbody.innerHTML += buatBaris("Wilayah", "Wilayah");
    tbody.innerHTML += buatBaris("Lintang", "Lintang");
    tbody.innerHTML += buatBaris("Bujur", "Bujur");
    tbody.innerHTML += buatBaris("Kedalaman", "Kedalaman");
    tbody.innerHTML += buatBaris("Magnitudo (SR)", "Magnitude");

    // Chart
    let labels = gempas.map(g => g.Wilayah);
    let magnitudes = gempas.map(g => parseFloat(g.Magnitude));

    const ctx = document.getElementById("gempaChart").getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: labels,
        datasets: [{
          label: "Magnitudo Gempa (Skala Richter)",
          data: magnitudes,
          borderWidth: 1,
          backgroundColor: "rgba(255, 99, 132, 0.5)"
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true,
            title: { display: true, text: "Magnitudo (SR)" }
          }
        }
      }
    });

  } catch (err) {
    console.error("Gagal memuat data gempa:", err);
  }
}
loadGempa();
</script>
</body>
</html>
  
 <div class="card muted">Sumber data: OpenWeatherMap , MyQuran API dan BMKG Nasional</div>
  </div>
  
<!-- kolom sumber data -->
  <style>
.card.muted {
  font-size: 12px;          /* ukuran font kecil */
  color: purple;            /* warna teks */
  /*background-color: #f3e5f5;*//* warna latar ungu muda */
  background-color: #fff8f0;
  text-align: center;       /* posisikan teks di tengah */
  margin-top: 6px;          /* jarak atas */
  padding: 6px 10px;        /* beri ruang dalam box */
  border-radius: 6px;       /* sudut tumpul */
  border: 1px solid #f3d7b6;
  /*border-radius: 10px;*/
  }
  </style>
